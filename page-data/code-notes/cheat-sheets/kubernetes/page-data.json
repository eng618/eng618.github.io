{"componentChunkName":"component---src-pages-code-notes-cheat-sheets-kubernetes-mdx","path":"/code-notes/cheat-sheets/kubernetes/","result":{"pageContext":{"frontmatter":{"title":"Kubernetes","description":"Kubernetes cheatsheet","tabs":["vi","grep","Markdown","Kubernetes","Elasticsearch"],"keywords":"Elasticsearch,Kubernetes,vi"},"relativePagePath":"/code-notes/cheat-sheets/kubernetes.mdx","titleType":"prepend","MdxNode":{"id":"381d9370-036b-57c0-9841-ded93d2d1b88","children":[],"parent":"0790f1a4-8082-5f1b-b041-93fa413e1b0f","internal":{"content":"---\ntitle: Kubernetes\ndescription: Kubernetes cheatsheet\ntabs: ['vi', 'grep', 'Markdown', 'Kubernetes', 'Elasticsearch']\nkeywords: 'Elasticsearch,Kubernetes,vi'\n---\n\n<PageDescription>\n\nKubernetes notes and cheatsheet\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Special use Cases</AnchorLink>\n  <AnchorLink>General Troubleshooting</AnchorLink>\n  <AnchorLink>Deleting A Namespace</AnchorLink>\n</AnchorLinks>\n\n## Special Use Cases\n\nIf you need too delete a pod, and can not wait for it to stop and terminate, you can force the delettions with the following:\n\n```shell\nkubectl delete pods -n <namespace> --grace-period=0 --force\n```\n\n**Flags**\n\n- `--grace-period`: Period of time in seconds given to the resource to terminate gracefully. Ignored if negative. Set to 1 for immediate shutdown. Can only be set to 0 when --force is true (force deletion).\n- `--force`: Only used when grace-period=0. If true, immediately remove resources from API and bypass graceful deletion. Note that immediate deletion of some resources may result in inconsistency or data loss and requires confirmation.\n\n## General Troubleshooting\n\nBelow are a few basic general areas to look into when trying to debug a issues depending on what the problem is.\n\n- Describe pod\n- logs pod\n- exec into pod to see whats going on\n\n## Deleting A Namespace\n\n```shell path=delete_namespace.sh src=https://github.ibm.com/engarcia/engarcia.github.ibm.com/blob/develop/bin/delete_namespace.sh\n#!/bin/bash\n\n# ./delete_namespace.sh <namespace>\n\nexport k8s_namespace=$1\n\necho \"~~ Removing deployments ~~\"\nkubectl get deployment -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete deployment -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing statefulsets ~~\"\nkubectl get statefulsets -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete statefulsets -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing jobs ~~\"\nkubectl get jobs -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete job -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing pods ~~\"\nkubectl get pods -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete pod -n \"$k8s_namespace\" arg --force --grace-period=0\necho \"\"\n\necho \"~~ Removing secrets ~~\"\nkubectl get secrets -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete secret -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing PVC's ~~\"\nkubectl -n \"$k8s_namespace\" get pvc | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete pvc -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing namespace ${k8s_namespace}  ~~\"\nkubectl delete namespace \"$k8s_namespace\"\necho \"\"\n\necho \"~~ Removing helm releases ~~\"\nhelm ls --namespace \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg helm delete --purge arg\necho \"\"\n\n```\n","type":"Mdx","contentDigest":"7f77172002a5db0b3390a8ba16471b5d","owner":"gatsby-plugin-mdx","counter":202},"frontmatter":{"title":"Kubernetes","description":"Kubernetes cheatsheet","tabs":["vi","grep","Markdown","Kubernetes","Elasticsearch"],"keywords":"Elasticsearch,Kubernetes,vi"},"exports":{},"rawBody":"---\ntitle: Kubernetes\ndescription: Kubernetes cheatsheet\ntabs: ['vi', 'grep', 'Markdown', 'Kubernetes', 'Elasticsearch']\nkeywords: 'Elasticsearch,Kubernetes,vi'\n---\n\n<PageDescription>\n\nKubernetes notes and cheatsheet\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Special use Cases</AnchorLink>\n  <AnchorLink>General Troubleshooting</AnchorLink>\n  <AnchorLink>Deleting A Namespace</AnchorLink>\n</AnchorLinks>\n\n## Special Use Cases\n\nIf you need too delete a pod, and can not wait for it to stop and terminate, you can force the delettions with the following:\n\n```shell\nkubectl delete pods -n <namespace> --grace-period=0 --force\n```\n\n**Flags**\n\n- `--grace-period`: Period of time in seconds given to the resource to terminate gracefully. Ignored if negative. Set to 1 for immediate shutdown. Can only be set to 0 when --force is true (force deletion).\n- `--force`: Only used when grace-period=0. If true, immediately remove resources from API and bypass graceful deletion. Note that immediate deletion of some resources may result in inconsistency or data loss and requires confirmation.\n\n## General Troubleshooting\n\nBelow are a few basic general areas to look into when trying to debug a issues depending on what the problem is.\n\n- Describe pod\n- logs pod\n- exec into pod to see whats going on\n\n## Deleting A Namespace\n\n```shell path=delete_namespace.sh src=https://github.ibm.com/engarcia/engarcia.github.ibm.com/blob/develop/bin/delete_namespace.sh\n#!/bin/bash\n\n# ./delete_namespace.sh <namespace>\n\nexport k8s_namespace=$1\n\necho \"~~ Removing deployments ~~\"\nkubectl get deployment -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete deployment -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing statefulsets ~~\"\nkubectl get statefulsets -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete statefulsets -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing jobs ~~\"\nkubectl get jobs -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete job -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing pods ~~\"\nkubectl get pods -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete pod -n \"$k8s_namespace\" arg --force --grace-period=0\necho \"\"\n\necho \"~~ Removing secrets ~~\"\nkubectl get secrets -n \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete secret -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing PVC's ~~\"\nkubectl -n \"$k8s_namespace\" get pvc | grep -v NAME | awk '{print $1}' | xargs -I arg kubectl delete pvc -n \"$k8s_namespace\" arg\necho \"\"\n\necho \"~~ Removing namespace ${k8s_namespace}  ~~\"\nkubectl delete namespace \"$k8s_namespace\"\necho \"\"\n\necho \"~~ Removing helm releases ~~\"\nhelm ls --namespace \"$k8s_namespace\" | grep -v NAME | awk '{print $1}' | xargs -I arg helm delete --purge arg\necho \"\"\n\n```\n","fileAbsolutePath":"/home/runner/work/eng618.github.io/eng618.github.io/src/pages/code-notes/cheat-sheets/kubernetes.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}